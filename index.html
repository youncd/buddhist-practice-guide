<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="ë²•ë¬¸ê³¼ ê³¼í•™ì˜ ë§Œë‚¨ - 14ê°€ì§€ ë§ˆìŒì„ ê´€ì°°í•˜ëŠ” ë§ˆìŒì±™ê¹€ ìˆ˜í–‰ ê²Œì„">
    <meta name="keywords" content="ë§ˆìŒì±™ê¹€, ëª…ìƒ, ìœ„ë¹ ì‚¬ë‚˜, ìˆ˜í–‰, ê²Œì„, ë¶ˆêµ, ê³¼í•™">
    <meta name="author" content="Mindfulness Education Platform">
    <title>ë§ˆìŒì±™ê¹€ ìˆ˜í–‰ ê²Œì„ í”Œë«í¼ | ë²•ë¬¸ê³¼ ê³¼í•™ì˜ ë§Œë‚¨</title>
    
    <!-- Open Graph ë©”íƒ€ íƒœê·¸ -->
    <meta property="og:title" content="ë§ˆìŒì±™ê¹€ ìˆ˜í–‰ ê²Œì„ í”Œë«í¼">
    <meta property="og:description" content="14ê°€ì§€ ë§ˆìŒì„ ê´€ì°°í•˜ë©° ìˆ˜í–‰í•˜ëŠ” í˜ì‹ ì ì¸ ê²Œì„í˜• ëª…ìƒ í”Œë«í¼">
    <meta property="og:type" content="website">
    
    <!-- íŒŒë¹„ì½˜ -->
    <link rel="icon" href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48dGV4dCB5PSIuOWVtIiBmb250LXNpemU9IjkwIj7wn6e98J+PvzwvdGV4dD48L3N2Zz4=" type="image/svg+xml">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
            min-height: 100vh;
            color: white;
            overflow-x: hidden;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .splash-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            animation: splashFade 4s ease-in-out forwards;
        }

        @keyframes splashFade {
            0% { opacity: 1; }
            80% { opacity: 1; }
            100% { opacity: 0; visibility: hidden; }
        }

        .splash-content {
            text-align: center;
            animation: bounceIn 2s ease-out;
        }

        @keyframes bounceIn {
            0% { transform: scale(0.3); opacity: 0; }
            50% { transform: scale(1.05); }
            70% { transform: scale(0.9); }
            100% { transform: scale(1); opacity: 1; }
        }

        .splash-title {
            font-size: 3em;
            margin-bottom: 20px;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .loading-bar {
            width: 300px;
            height: 6px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 3px;
            overflow: hidden;
            margin-top: 30px;
        }

        .loading-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff6b6b, #4ecdc4);
            width: 0%;
            animation: loading 3s ease-in-out forwards;
        }

        @keyframes loading {
            0% { width: 0%; }
            100% { width: 100%; }
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            opacity: 0;
            animation: containerFadeIn 1s ease-in 4s forwards;
        }

        @keyframes containerFadeIn {
            from { opacity: 0; transform: translateY(50px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .game-header {
            text-align: center;
            padding: 30px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            margin-bottom: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
        }

        .game-title {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .player-stats {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .stat-item {
            background: rgba(255, 255, 255, 0.2);
            padding: 15px 25px;
            border-radius: 15px;
            text-align: center;
            min-width: 120px;
            animation: statPulse 2s ease-in-out infinite alternate;
        }

        @keyframes statPulse {
            from { transform: scale(1); }
            to { transform: scale(1.05); }
        }

        .stat-value {
            font-size: 1.8em;
            font-weight: bold;
            color: #ffeb3b;
        }

        .game-board {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .game-card {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 20px;
            padding: 25px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transform: translateY(50px);
            opacity: 0;
            animation: cardSlideIn 1s ease-out forwards;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .game-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.3);
        }

        @keyframes cardSlideIn {
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .card-title {
            font-size: 1.5em;
            margin-bottom: 15px;
            color: #ffeb3b;
            text-align: center;
        }

        .mind-wheel {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            margin: 20px auto;
            position: relative;
            background: conic-gradient(
                #ff6b6b, #ffa726, #ffeb3b, #66bb6a,
                #42a5f5, #ab47bc, #ec407a, #ff6b6b
            );
            animation: wheelSpin 10s linear infinite;
            cursor: pointer;
        }

        @keyframes wheelSpin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .wheel-center {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 60px;
            height: 60px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5em;
            color: #333;
        }

        .mind-segments {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin: 20px 0;
        }

        .mind-segment {
            background: rgba(255, 255, 255, 0.2);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .mind-segment:hover {
            background: rgba(255, 255, 255, 0.3);
            border-color: #ffeb3b;
            transform: scale(1.05);
        }

        .mind-segment.active {
            background: rgba(255, 235, 59, 0.3);
            border-color: #ffeb3b;
        }

        .progress-circle {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: conic-gradient(#4caf50 0deg, #4caf50 var(--progress, 0deg), transparent var(--progress, 0deg));
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 20px auto;
            position: relative;
        }

        .progress-circle::before {
            content: '';
            width: 80px;
            height: 80px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            position: absolute;
        }

        .progress-text {
            position: relative;
            z-index: 1;
            font-weight: bold;
        }

        .quest-container {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
        }

        .quest-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            border-left: 4px solid #4caf50;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .quest-item:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateX(10px);
        }

        .meditation-timer {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            margin: 20px 0;
        }

        .timer-display {
            font-size: 4em;
            font-weight: bold;
            margin: 20px 0;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
            color: #ffeb3b;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            cursor: pointer;
            margin: 10px;
            font-size: 1.1em;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3);
        }

        .btn:active {
            transform: translateY(0);
        }

        .floating-wisdom {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.8);
            padding: 15px;
            border-radius: 10px;
            max-width: 300px;
            opacity: 0;
            transform: translateX(100%);
            transition: all 0.5s ease;
            z-index: 100;
        }

        .floating-wisdom.show {
            opacity: 1;
            transform: translateX(0);
        }

        .typewriter {
            overflow: hidden;
            white-space: nowrap;
            border-right: 2px solid;
            animation: typing 3s steps(40) infinite;
        }

        @keyframes typing {
            0%, 90%, 100% { width: 0; }
            30%, 60% { width: 100%; }
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: #ffeb3b;
            border-radius: 50%;
            pointer-events: none;
            animation: particleFloat 3s ease-out forwards;
        }

        @keyframes particleFloat {
            0% {
                transform: translateY(0) scale(1);
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) scale(0);
                opacity: 0;
            }
        }

        .achievement-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            background: linear-gradient(135deg, #4caf50, #45a049);
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            z-index: 1000;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        .achievement-popup.show {
            animation: achievementPop 2s ease-out forwards;
        }

        @keyframes achievementPop {
            0% { transform: translate(-50%, -50%) scale(0); }
            20% { transform: translate(-50%, -50%) scale(1.2); }
            40% { transform: translate(-50%, -50%) scale(1); }
            100% { transform: translate(-50%, -50%) scale(1); }
        }

        /* ê²Œì„ ì¹´ë“œ ì• ë‹ˆë©”ì´ì…˜ ì§€ì—° */
        .game-card:nth-child(1) { animation-delay: 0.2s; }
        .game-card:nth-child(2) { animation-delay: 0.4s; }
        .game-card:nth-child(3) { animation-delay: 0.6s; }
        .game-card:nth-child(4) { animation-delay: 0.8s; }
        .game-card:nth-child(5) { animation-delay: 1.0s; }
        .game-card:nth-child(6) { animation-delay: 1.2s; }

        @media (max-width: 768px) {
            .game-title { font-size: 2em; }
            .timer-display { font-size: 2.5em; }
            .player-stats { flex-direction: column; align-items: center; }
            .mind-wheel { width: 150px; height: 150px; }
            .floating-wisdom { 
                position: relative; 
                right: auto; 
                top: auto; 
                margin: 20px 0;
                transform: none;
                opacity: 1;
            }
            .splash-title { font-size: 2em; }
            .loading-bar { width: 250px; }
            .btn { padding: 12px 20px; font-size: 1em; }
        }

        @media (max-width: 480px) {
            .container { padding: 10px; }
            .game-header { padding: 20px; }
            .game-card { padding: 20px; }
            .meditation-timer { padding: 20px; }
            .stat-item { min-width: 100px; padding: 10px 15px; }
            .mind-wheel { width: 120px; height: 120px; }
        }
    </style>
</head>
<body>
    <!-- ìŠ¤í”Œë˜ì‹œ í™”ë©´ -->
    <div class="splash-screen">
        <div class="splash-content">
            <div class="splash-title">ğŸ§˜â€â™€ï¸ ë§ˆìŒì±™ê¹€ ìˆ˜í–‰</div>
            <p style="font-size: 1.2em; margin: 20px 0;">ë²•ë¬¸ê³¼ ê³¼í•™ì˜ ë§Œë‚¨</p>
            <div class="loading-bar">
                <div class="loading-fill"></div>
            </div>
            <p style="margin-top: 20px; opacity: 0.8;">ìˆ˜í–‰ì˜ ì—¬ì •ì´ ì‹œì‘ë©ë‹ˆë‹¤...</p>
        </div>
    </div>

    <!-- ë©”ì¸ ì»¨í…Œì´ë„ˆ -->
    <div class="container">
        <!-- ê²Œì„ í—¤ë” -->
        <header class="game-header">
            <h1 class="game-title">ğŸ§˜â€â™€ï¸ 14ê°€ì§€ ë§ˆìŒ ìˆ˜í–‰ ê²Œì„</h1>
            <p class="typewriter">ë§¤ ìˆœê°„ ì•Œì•„ì°¨ë¦¬ëŠ” ì§€í˜œì˜ ì—¬ì •</p>
            
            <!-- í”Œë ˆì´ì–´ ìŠ¤íƒ¯ -->
            <div class="player-stats">
                <div class="stat-item">
                    <div class="stat-value" id="level">1</div>
                    <div>ìˆ˜í–‰ ë ˆë²¨</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="experience">0</div>
                    <div>ê²½í—˜ì¹˜</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="wisdom">0</div>
                    <div>ì§€í˜œ í¬ì¸íŠ¸</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="streak">1</div>
                    <div>ì—°ì† ìˆ˜í–‰ì¼</div>
                </div>
            </div>
        </header>

        <!-- ê²Œì„ ë³´ë“œ -->
        <div class="game-board">
            <!-- ë§ˆìŒ ê´€ì°° íœ  -->
            <div class="game-card">
                <h3 class="card-title">ğŸ¯ ë§ˆìŒ ê´€ì°° íœ </h3>
                <div class="mind-wheel" onclick="spinWheel()">
                    <div class="wheel-center">ğŸ§˜</div>
                </div>
                <p style="text-align: center; margin-top: 15px;">íœ ì„ í´ë¦­í•˜ì—¬ ë¬´ì‘ìœ„ ë§ˆìŒ ìƒíƒœë¥¼ ê´€ì°°í•˜ì„¸ìš”</p>
                <div id="current-observation" style="text-align: center; margin-top: 10px; font-weight: bold;"></div>
            </div>

            <!-- 14ê°€ì§€ ë§ˆìŒ ì²´í¬ -->
            <div class="game-card">
                <h3 class="card-title">ğŸ“‹ 14ê°€ì§€ ë§ˆìŒ ì²´í¬</h3>
                <div class="mind-segments" id="mind-segments">
                    <!-- ë™ì ìœ¼ë¡œ ìƒì„± -->
                </div>
                <div class="progress-circle" style="--progress: 0deg;">
                    <div class="progress-text" id="mind-progress">0%</div>
                </div>
            </div>

            <!-- ìˆ˜í–‰ í€˜ìŠ¤íŠ¸ -->
            <div class="game-card">
                <h3 class="card-title">ğŸ† ì˜¤ëŠ˜ì˜ ìˆ˜í–‰ í€˜ìŠ¤íŠ¸</h3>
                <div class="quest-container" id="quest-container">
                    <!-- ë™ì ìœ¼ë¡œ ìƒì„± -->
                </div>
                <button class="btn" onclick="generateQuests()">ìƒˆë¡œìš´ í€˜ìŠ¤íŠ¸ ë°›ê¸°</button>
            </div>

            <!-- ëª…ìƒ íƒ€ì´ë¨¸ -->
            <div class="game-card">
                <h3 class="card-title">â° ëª…ìƒ íƒ€ì´ë¨¸</h3>
                <div class="meditation-timer">
                    <div class="timer-display" id="timer">00:00</div>
                    <div>
                        <button class="btn" onclick="setTimer(5)">5ë¶„</button>
                        <button class="btn" onclick="setTimer(10)">10ë¶„</button>
                        <button class="btn" onclick="setTimer(20)">20ë¶„</button>
                    </div>
                    <div style="margin-top: 15px;">
                        <button class="btn" onclick="startTimer()" id="start-btn">ì‹œì‘</button>
                        <button class="btn" onclick="pauseTimer()">ì¼ì‹œì •ì§€</button>
                        <button class="btn" onclick="resetTimer()">ë¦¬ì…‹</button>
                    </div>
                </div>
            </div>

            <!-- ì§€í˜œì˜ ë§ì”€ -->
            <div class="game-card">
                <h3 class="card-title">ğŸ’ ë²•ë¬¸ ì§€í˜œ</h3>
                <div id="wisdom-text" style="font-style: italic; text-align: center; padding: 20px; background: rgba(0,0,0,0.2); border-radius: 10px; margin: 15px 0;">
                    ë¡œë”© ì¤‘...
                </div>
                <button class="btn" onclick="showWisdom()">ìƒˆë¡œìš´ ì§€í˜œ ë°›ê¸°</button>
            </div>

            <!-- ê³¼í•™ì  ì„¤ëª… -->
            <div class="game-card">
                <h3 class="card-title">ğŸ§¬ ê³¼í•™ì  ê·¼ê±°</h3>
                <div id="science-content" style="background: rgba(0,0,0,0.2); padding: 20px; border-radius: 10px;">
                    ë¡œë”© ì¤‘...
                </div>
                <button class="btn" onclick="showScience()">ê³¼í•™ ì„¤ëª… ë³´ê¸°</button>
            </div>
        </div>
    </div>

    <!-- ë– ë‹¤ë‹ˆëŠ” ì§€í˜œ ë©”ì‹œì§€ -->
    <div class="floating-wisdom" id="floating-wisdom">
        <div id="wisdom-message"></div>
    </div>

    <!-- ì„±ì·¨ íŒì—… -->
    <div class="achievement-popup" id="achievement-popup">
        <h2>ğŸ‰ ì„±ì·¨ ë‹¬ì„±!</h2>
        <p id="achievement-text"></p>
    </div>

    <script>
        // ê²Œì„ ìƒíƒœ ë³€ìˆ˜
        let gameState = {
            level: 1,
            experience: 0,
            wisdom: 0,
            streak: 1,
            currentTimer: 0,
            timerInterval: null,
            isTimerRunning: false,
            observedMinds: new Set(),
            completedQuests: new Set()
        };

        // 14ê°€ì§€ ë§ˆìŒ ë°ì´í„°
        const minds = [
            { id: 'sight', name: 'ğŸ‘ï¸ ë³´ëŠ” ë§ˆìŒ', desc: 'ì•ˆì‹ - ì‹œê°ì  ì¸ì‹' },
            { id: 'hearing', name: 'ğŸ‘‚ ë“£ëŠ” ë§ˆìŒ', desc: 'ì´ì‹ - ì²­ê°ì  ì¸ì‹' },
            { id: 'smell', name: 'ğŸ‘ƒ ëƒ„ìƒˆë§¡ëŠ” ë§ˆìŒ', desc: 'ë¹„ì‹ - í›„ê°ì  ì¸ì‹' },
            { id: 'taste', name: 'ğŸ‘… ë§›ë³´ëŠ” ë§ˆìŒ', desc: 'ì„¤ì‹ - ë¯¸ê°ì  ì¸ì‹' },
            { id: 'touch', name: 'âœ‹ ê°ì´‰í•˜ëŠ” ë§ˆìŒ', desc: 'ì‹ ì‹ - ì´‰ê°ì  ì¸ì‹' },
            { id: 'think', name: 'ğŸ§  ìƒê°í•˜ëŠ” ë§ˆìŒ', desc: 'ì˜ì‹ - ì •ì‹ ì  ì¸ì‹' },
            { id: 'greed', name: 'ğŸ˜¤ íƒìš• ë§ˆìŒ', desc: 'ë¡œë°” - ìš•ì‹¬ë‚´ëŠ” ë§ˆìŒ' },
            { id: 'anger', name: 'ğŸ˜¡ ì„±ëƒ„ ë§ˆìŒ', desc: 'ë„ì‚¬ - í™”ë‚´ëŠ” ë§ˆìŒ' },
            { id: 'delusion', name: 'ğŸ˜µ ì–´ë¦¬ì„ìŒ ë§ˆìŒ', desc: 'ëª¨í•˜ - ë¬´ì§€í•œ ë§ˆìŒ' },
            { id: 'nongreed', name: 'ğŸ™ ë¬´íƒ ë§ˆìŒ', desc: 'ì•„ë¡œë°” - ìš•ì‹¬ì—†ëŠ” ë§ˆìŒ' },
            { id: 'nonanger', name: 'ğŸ˜Œ ë¬´ì§„ ë§ˆìŒ', desc: 'ì•„ë„ì‚¬ - ìë¹„ë¡œìš´ ë§ˆìŒ' },
            { id: 'nondelusion', name: 'ğŸ§˜ ë¬´ì¹˜ ë§ˆìŒ', desc: 'ì•„ëª¨í•˜ - ì§€í˜œë¡œìš´ ë§ˆìŒ' },
            { id: 'inhale', name: 'ğŸ« ë“¤ì´ì‰¬ëŠ” ë§ˆìŒ', desc: 'í˜¸í¡ ê´€ì°° - ë“¤ìˆ¨' },
            { id: 'exhale', name: 'ğŸ« ë‚´ì‰¬ëŠ” ë§ˆìŒ', desc: 'í˜¸í¡ ê´€ì°° - ë‚ ìˆ¨' }
        ];

        // ë²•ë¬¸ ì§€í˜œ ëª¨ìŒ
        const wisdomTexts = [
            "ì¸ê°„ì´ ë³¸ë˜ ì„ í•œ ì¡´ì¬ì¸ê°€ ì•…í•œ ì¡´ì¬ì¸ê°€? íƒœì–´ë‚¨ ìì²´ëŠ” ê³¼ë³´ë¡œ íƒœì–´ë‚˜ê³  ì„ í•œ ì¡´ì¬ ë¶ˆì„ í•œ ì¡´ì¬ë¡œ ë‹¨ì • ì§€ì„ ìˆ˜ ì—†ë‹¤.",
            "ë§¤ ìˆœê°„ ë…¸ë ¥í•˜ì§€ ì•ŠëŠ” í•œ ìš°ë¦¬ì˜ ë§ˆìŒì€ ì•ˆ ì¢‹ì€ ë¿Œë¦¬ ìª½ìœ¼ë¡œ ê°ˆ ê°€ëŠ¥ì„±ì´ ë§ë‹¤ëŠ” ê²ƒì„ ì•Œê³  ìˆì–´ì•¼ í•œë‹¤.",
            "ìˆ˜í–‰í•˜ëŠ” ë§ˆìŒì´ ë¶ˆíƒ ë¶ˆì§„ ë¶ˆì¹˜ë¼ëŠ” ë¿Œë¦¬ë¥¼ ê°–ê³  ìˆëŠ” ë§ˆìŒì´ë‹¤.",
            "ê³„ìœ¨ì´ ì¢‹ì•„ì§€ë©´ì„œ ë§ˆìŒì´ ë²ˆë‡Œê°€ ì˜ ì•ˆ ì¼ì–´ë‚˜ê¸° ë•Œë¬¸ì— ì²­ì •í•´ì§€ë©´ ê·¸ ë§ˆìŒì˜ ì²­ì •ì´ ì§‘ì¤‘ì´ ëœë‹¤.",
            "ì •ì´ë¼ëŠ” ê²ƒì´ ê±°ìš¸ì„ ë‹¦ì•„ì„œ ê¹¨ë—í•´ì§€ëŠ” ê²ƒ ê°™ê³  ê·¸ëŸ¬ë©´ ì˜ ë³´ì´ëŠ” ê²ƒì´ ì§€í˜œì´ë‹¤.",
            "ë¬´ìƒì„ ë´ì•¼ ê³ í†µì´ ë“œëŸ¬ë‚˜ê³ , ê³ ê°€ ë“œëŸ¬ë‚˜ì•¼ ì§‘ì°©ì„ ë²„ë¦´ ìˆ˜ ìˆë‹¤.",
            "ìœ„ë¹ ì‚¬ë‚˜ ì§€í˜œê°€ ìƒê¸°ë©´ ë¬¼ì§ˆ ì •ì‹ ì€ êµ´ëŸ¬ê°€ê³  ìˆëŠ”ë° ìš°ë¦¬ëŠ” ê±°ê¸° ê°œì…í•˜ì§€ ì•ŠëŠ”ë‹¤. ê·¸ê²ƒì´ í•´ë°©ì´ë‹¤.",
            "ìš°ë¦¬ëŠ” í•œ ìˆœê°„ í•œ ë§ˆìŒ í•œ ìˆœê°„ í•œ ë§ˆìŒìœ¼ë¡œ ì‚´ê³  ìˆë‹¤.",
            "ìœ„ë¹ ì‚¬ë‚˜ ì—†ì´ ê¹¨ë‹«ì§€ ëª»í•œë‹¤. ì‘ì€ í•´íƒˆë“¤ì´ ëª¨ì•„ì ¸ì•¼ í° í•´íƒˆë¡œ ê°ˆ ìˆ˜ ìˆë‹¤."
        ];

        // ê³¼í•™ì  ì„¤ëª… ëª¨ìŒ
        const scienceTexts = [
            {
                title: "ğŸ§  ë‡Œê³¼í•™ì  ê·¼ê±°",
                content: "ë§ˆìŒì±™ê¹€ ëª…ìƒì€ ì „ì „ë‘í”¼ì§ˆì„ í™œì„±í™”ì‹œì¼œ ê°ì • ì¡°ì ˆ ëŠ¥ë ¥ì„ í–¥ìƒì‹œí‚µë‹ˆë‹¤. í•˜ë²„ë“œ ì˜ëŒ€ ì—°êµ¬ì— ë”°ë¥´ë©´ 8ì£¼ê°„ì˜ ëª…ìƒìœ¼ë¡œ ë‡Œ êµ¬ì¡°ê°€ ì‹¤ì œë¡œ ë³€í™”í•©ë‹ˆë‹¤."
            },
            {
                title: "ğŸ§¬ ìœ ì „í•™ì  ë³€í™”",
                content: "ëª…ìƒì€ ìŠ¤íŠ¸ë ˆìŠ¤ ê´€ë ¨ ìœ ì „ì ë°œí˜„ì„ ë³€í™”ì‹œí‚µë‹ˆë‹¤. í…”ë¡œë¯¸ì–´ ê¸¸ì´ê°€ ë³´ì¡´ë˜ì–´ ì„¸í¬ ë…¸í™”ê°€ ì§€ì—°ë˜ê³ , ì—¼ì¦ ë°˜ì‘ ìœ ì „ìê°€ ì–µì œë©ë‹ˆë‹¤."
            },
            {
                title: "âš›ï¸ ë¬¼ë¦¬í•™ì  ê´€ì ",
                content: "ë¬´ìƒ(ç„¡å¸¸)ì˜ ê°œë…ì€ ì—´ì—­í•™ ì œ2ë²•ì¹™ì˜ ì—”íŠ¸ë¡œí”¼ ì¦ê°€ì™€ ì¼ì¹˜í•©ë‹ˆë‹¤. ì–‘ìì—­í•™ì˜ ë¶ˆí™•ì •ì„± ì›ë¦¬ë„ ìˆœê°„ìˆœê°„ ë³€í™”í•˜ëŠ” ë§ˆìŒì˜ íŠ¹ì„±ì„ ì„¤ëª…í•©ë‹ˆë‹¤."
            },
            {
                title: "ğŸ”¬ ìƒë¦¬í•™ì  íš¨ê³¼",
                content: "ëª…ìƒì€ ì‹¬ë°•ë³€ì´ë„(HRV)ë¥¼ ê°œì„ í•˜ê³  ì½”ë¥´í‹°ì†” ìˆ˜ì¹˜ë¥¼ ë‚®ì¶¥ë‹ˆë‹¤. ë©´ì—­ ê¸°ëŠ¥ì´ í–¥ìƒë˜ê³  ììœ¨ì‹ ê²½ê³„ì˜ ê· í˜•ì´ ë§ì¶°ì§‘ë‹ˆë‹¤."
            }
        ];

        // í€˜ìŠ¤íŠ¸ ë°ì´í„°
        const quests = [
            { id: 'breathe', text: '10ë¶„ê°„ í˜¸í¡ ê´€ì°°í•˜ê¸°', reward: 50, type: 'meditation' },
            { id: 'observe6', text: '6ê°€ì§€ ê°ê°ì˜ì‹ ëª¨ë‘ ê´€ì°°í•˜ê¸°', reward: 30, type: 'mindfulness' },
            { id: 'noanger', text: 'í•˜ë£¨ì¢…ì¼ ì„±ëƒ„ ì—†ì´ ì§€ë‚´ê¸°', reward: 100, type: 'virtue' },
            { id: 'loving', text: 'ìë¹„ëª…ìƒ 5ë¶„ ì‹¤ì²œí•˜ê¸°', reward: 40, type: 'meditation' },
            { id: 'impermanence', text: 'ë¬´ìƒ ê´€ì°° 15ë¶„ í•˜ê¸°', reward: 80, type: 'wisdom' },
            { id: 'mindful_eating', text: 'ë§ˆìŒì±™ê¹€ ì‹ì‚¬ í•œ ë²ˆ í•˜ê¸°', reward: 25, type: 'mindfulness' },
            { id: 'walking', text: 'ë§ˆìŒì±™ê¹€ ê±·ê¸° 10ë¶„ í•˜ê¸°', reward: 35, type: 'mindfulness' }
        ];

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            // ì´ˆê¸° ë°ì´í„° ë¡œë“œ
            setTimeout(() => {
                initializeGame();
                generateMindSegments();
                generateQuests();
                showWisdom();
                showScience();
                startWisdomFlow();
                autoGenerateContent();
            }, 4000);
        });

        // ê²Œì„ ì´ˆê¸°í™”
        function initializeGame() {
            updateStats();
            resetTimer();
        }

        // ìŠ¤íƒ¯ ì—…ë°ì´íŠ¸
        function updateStats() {
            document.getElementById('level').textContent = gameState.level;
            document.getElementById('experience').textContent = gameState.experience;
            document.getElementById('wisdom').textContent = gameState.wisdom;
            document.getElementById('streak').textContent = gameState.streak;
        }

        // ë§ˆìŒ ì„¸ê·¸ë¨¼íŠ¸ ìƒì„±
        function generateMindSegments() {
            const container = document.getElementById('mind-segments');
            container.innerHTML = '';
            
            minds.slice(0, 8).forEach((mind, index) => {
                setTimeout(() => {
                    const segment = document.createElement('div');
                    segment.className = 'mind-segment';
                    segment.innerHTML = `
                        <div style="font-size: 1.2em; margin-bottom: 5px;">${mind.name.split(' ')[0]}</div>
                        <div style="font-size: 0.9em; opacity: 0.8;">${mind.desc}</div>
                    `;
                    segment.onclick = () => observeMind(mind.id);
                    container.appendChild(segment);
                    
                    // ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼
                    segment.style.transform = 'scale(0)';
                    setTimeout(() => {
                        segment.style.transform = 'scale(1)';
                        segment.style.transition = 'transform 0.3s ease';
                    }, 50);
                }, index * 200);
            });
        }

        // ë§ˆìŒ ê´€ì°° í•¨ìˆ˜
        function observeMind(mindId) {
            const mind = minds.find(m => m.id === mindId);
            if (!mind) return;

            // ê´€ì°°ëœ ë§ˆìŒìœ¼ë¡œ í‘œì‹œ
            gameState.observedMinds.add(mindId);
            
            // ê²½í—˜ì¹˜ ë° ì§€í˜œ í¬ì¸íŠ¸ ì¦ê°€
            gameState.experience += 10;
            gameState.wisdom += 5;
            
            // íŒŒí‹°í´ íš¨ê³¼
            if (event && event.target) {
                createParticles(event.target);
            }
            
            // í”¼ë“œë°± ë©”ì‹œì§€
            showFloatingWisdom(`${mind.name} ê´€ì°° ì™„ë£Œ! +10 ê²½í—˜ì¹˜`);
            
            // ì§„í–‰ë„ ì—…ë°ì´íŠ¸
            updateMindProgress();
            updateStats();
            
            // ë ˆë²¨ì—… ì²´í¬
            checkLevelUp();
            
            // ì„±ì·¨ ì²´í¬
            if (gameState.observedMinds.size === 6) {
                showAchievement('6ê°€ì§€ ê°ê°ì˜ì‹ ë§ˆìŠ¤í„°!', '+100 ë³´ë„ˆìŠ¤ ê²½í—˜ì¹˜');
                gameState.experience += 100;
                updateStats();
            }
        }

        // ë§ˆìŒ ì§„í–‰ë„ ì—…ë°ì´íŠ¸
        function updateMindProgress() {
            const progress = (gameState.observedMinds.size / 14) * 100;
            const degrees = (progress / 100) * 360;
            
            document.querySelector('.progress-circle').style.setProperty('--progress', degrees + 'deg');
            document.getElementById('mind-progress').textContent = Math.round(progress) + '%';
        }

        // íœ  ìŠ¤í•€ í•¨ìˆ˜
        function spinWheel() {
            const wheel = document.querySelector('.mind-wheel');
            const randomMind = minds[Math.floor(Math.random() * minds.length)];
            
            // íœ  íšŒì „ ì• ë‹ˆë©”ì´ì…˜
            wheel.style.animation = 'none';
            setTimeout(() => {
                wheel.style.animation = 'wheelSpin 2s ease-out';
            }, 10);
            
            // ê²°ê³¼ í‘œì‹œ
            setTimeout(() => {
                document.getElementById('current-observation').innerHTML = `
                    <div style="background: rgba(255,235,59,0.3); padding: 10px; border-radius: 8px; margin-top: 10px;">
                        <strong>${randomMind.name}</strong><br>
                        <small>${randomMind.desc}</small>
                    </div>
                `;
                observeMind(randomMind.id);
            }, 2000);
        }

        // í€˜ìŠ¤íŠ¸ ìƒì„±
        function generateQuests() {
            const container = document.getElementById('quest-container');
            const shuffledQuests = [...quests].sort(() => Math.random() - 0.5).slice(0, 3);
            
            container.innerHTML = '';
            
            shuffledQuests.forEach((quest, index) => {
                setTimeout(() => {
                    const questElement = document.createElement('div');
                    questElement.className = 'quest-item';
                    questElement.innerHTML = `
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <strong>${quest.text}</strong>
                                <div style="font-size: 0.9em; opacity: 0.7; margin-top: 5px;">
                                    ${quest.type === 'meditation' ? 'ğŸ§˜' : quest.type === 'mindfulness' ? 'ğŸ¯' : quest.type === 'virtue' ? 'ğŸ’' : 'ğŸ”®'} 
                                    ë³´ìƒ: ${quest.reward} ê²½í—˜ì¹˜
                                </div>
                            </div>
                            <button class="btn" onclick="completeQuest('${quest.id}', ${quest.reward})" style="padding: 8px 15px; font-size: 0.9em;">
                                ì™„ë£Œ
                            </button>
                        </div>
                    `;
                    container.appendChild(questElement);
                    
                    // ì• ë‹ˆë©”ì´ì…˜
                    questElement.style.transform = 'translateX(-100%)';
                    setTimeout(() => {
                        questElement.style.transform = 'translateX(0)';
                        questElement.style.transition = 'transform 0.5s ease';
                    }, 50);
                }, index * 300);
            });
        }

        // í€˜ìŠ¤íŠ¸ ì™„ë£Œ
        function completeQuest(questId, reward) {
            if (gameState.completedQuests.has(questId)) {
                showFloatingWisdom('ì´ë¯¸ ì™„ë£Œí•œ í€˜ìŠ¤íŠ¸ì…ë‹ˆë‹¤!');
                return;
            }
            
            gameState.completedQuests.add(questId);
            gameState.experience += reward;
            gameState.wisdom += Math.floor(reward / 2);
            
            showAchievement('í€˜ìŠ¤íŠ¸ ì™„ë£Œ!', `+${reward} ê²½í—˜ì¹˜ íšë“`);
            updateStats();
            checkLevelUp();
            
            // ì™„ë£Œëœ í€˜ìŠ¤íŠ¸ í‘œì‹œ
            if (event && event.target) {
                event.target.textContent = 'ì™„ë£Œë¨';
                event.target.disabled = true;
                event.target.style.background = '#4caf50';
            }
        }

        // íƒ€ì´ë¨¸ í•¨ìˆ˜ë“¤
        function setTimer(minutes) {
            gameState.currentTimer = minutes * 60;
            updateTimerDisplay();
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(gameState.currentTimer / 60);
            const seconds = gameState.currentTimer % 60;
            document.getElementById('timer').textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        function startTimer() {
            if (!gameState.isTimerRunning && gameState.currentTimer > 0) {
                gameState.isTimerRunning = true;
                document.getElementById('start-btn').textContent = 'ì§„í–‰ì¤‘...';
                
                gameState.timerInterval = setInterval(() => {
                    gameState.currentTimer--;
                    updateTimerDisplay();
                    
                    if (gameState.currentTimer <= 0) {
                        pauseTimer();
                        showAchievement('ëª…ìƒ ì™„ë£Œ!', 'ëª…ìƒì„ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤! +50 ê²½í—˜ì¹˜');
                        gameState.experience += 50;
                        gameState.wisdom += 25;
                        updateStats();
                        checkLevelUp();
                    }
                }, 1000);
            }
        }

        function pauseTimer() {
            gameState.isTimerRunning = false;
            clearInterval(gameState.timerInterval);
            document.getElementById('start-btn').textContent = 'ì‹œì‘';
        }

        function resetTimer() {
            pauseTimer();
            gameState.currentTimer = 0;
            updateTimerDisplay();
        }

        // ì§€í˜œ í‘œì‹œ
        function showWisdom() {
            const randomWisdom = wisdomTexts[Math.floor(Math.random() * wisdomTexts.length)];
            const container = document.getElementById('wisdom-text');
            
            // íƒ€ì´í•‘ íš¨ê³¼
            container.innerHTML = '';
            let index = 0;
            const typeEffect = setInterval(() => {
                container.innerHTML += randomWisdom[index];
                index++;
                if (index >= randomWisdom.length) {
                    clearInterval(typeEffect);
                    gameState.wisdom += 10;
                    updateStats();
                }
            }, 50);
        }

        // ê³¼í•™ ì„¤ëª… í‘œì‹œ
        function showScience() {
            const randomScience = scienceTexts[Math.floor(Math.random() * scienceTexts.length)];
            const container = document.getElementById('science-content');
            
            container.innerHTML = `
                <h4 style="color: #ffeb3b; margin-bottom: 15px;">${randomScience.title}</h4>
                <p style="line-height: 1.6;">${randomScience.content}</p>
            `;
            
            // í˜ì´ë“œì¸ íš¨ê³¼
            container.style.opacity = '0';
            setTimeout(() => {
                container.style.opacity = '1';
                container.style.transition = 'opacity 1s ease';
            }, 100);
        }

        // ë– ë‹¤ë‹ˆëŠ” ì§€í˜œ ë©”ì‹œì§€
        function showFloatingWisdom(message) {
            const wisdom = document.getElementById('floating-wisdom');
            document.getElementById('wisdom-message').textContent = message;
            
            wisdom.classList.add('show');
            setTimeout(() => {
                wisdom.classList.remove('show');
            }, 3000);
        }

        // ì§€í˜œ ìë™ íë¦„
        function startWisdomFlow() {
            setInterval(() => {
                const messages = [
                    "ğŸ’« ë§¤ ìˆœê°„ì´ ìˆ˜í–‰ì˜ ê¸°íšŒì…ë‹ˆë‹¤",
                    "ğŸŒŸ ì•Œì•„ì°¨ë¦¼ì´ í•´íƒˆì˜ ì—´ì‡ ì…ë‹ˆë‹¤", 
                    "âœ¨ ë¬´ìƒì„ ë³´ë©´ ì§‘ì°©ì´ ì‚¬ë¼ì§‘ë‹ˆë‹¤",
                    "ğŸ”® ì§€í˜œëŠ” ê²½í—˜ìœ¼ë¡œ ì–»ì–´ì§‘ë‹ˆë‹¤",
                    "ğŸŒ™ ê³ ìš”í•œ ë§ˆìŒì—ì„œ í†µì°°ì´ ì¼ì–´ë‚©ë‹ˆë‹¤"
                ];
                const randomMessage = messages[Math.floor(Math.random() * messages.length)];
                showFloatingWisdom(randomMessage);
            }, 10000);
        }

        // íŒŒí‹°í´ íš¨ê³¼
        function createParticles(element) {
            for (let i = 0; i < 5; i++) {
                setTimeout(() => {
                    const particle = document.createElement('div');
                    particle.className = 'particle';
                    particle.style.left = Math.random() * 100 + '%';
                    particle.style.top = Math.random() * 100 + '%';
                    element.appendChild(particle);
                    
                    setTimeout(() => {
                        particle.remove();
                    }, 3000);
                }, i * 100);
            }
        }

        // ì„±ì·¨ íŒì—…
        function showAchievement(title, description) {
            const popup = document.getElementById('achievement-popup');
            document.getElementById('achievement-text').innerHTML = `
                <strong>${title}</strong><br>
                <span style="opacity: 0.8;">${description}</span>
            `;
            
            popup.classList.add('show');
            setTimeout(() => {
                popup.classList.remove('show');
            }, 3000);
        }

        // ë ˆë²¨ì—… ì²´í¬
        function checkLevelUp() {
            const requiredExp = gameState.level * 100;
            if (gameState.experience >= requiredExp) {
                gameState.level++;
                gameState.experience -= requiredExp;
                showAchievement(`ë ˆë²¨ ${gameState.level} ë‹¬ì„±!`, 'ìƒˆë¡œìš´ ìˆ˜í–‰ ë‹¨ê³„ì— ë„ë‹¬í–ˆìŠµë‹ˆë‹¤');
                updateStats();
            }
        }

        // ìë™ ì½˜í…ì¸  ìƒì„± ì‹œìŠ¤í…œ
        function autoGenerateContent() {
            setInterval(() => {
                // ëœë¤í•˜ê²Œ ìƒˆë¡œìš´ ì§€í˜œë‚˜ ê³¼í•™ ì„¤ëª… í‘œì‹œ
                if (Math.random() > 0.5) {
                    showWisdom();
                } else {
                    showScience();
                }
            }, 30000); // 30ì´ˆë§ˆë‹¤
        }
    </script>
</body>
</html>
